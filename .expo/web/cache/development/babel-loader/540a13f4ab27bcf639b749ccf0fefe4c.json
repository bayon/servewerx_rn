{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { Formik } from \"formik\";\nimport React, { useEffect, useState } from \"react\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as yup from \"yup\";\nimport * as authAction from \"../redux/actions/authAction\";\nimport FormStyles from \"./FormStyles\";\nvar formSchema = yup.object({\n  email: yup.string().email().required(),\n  password: yup.string().required().min(6)\n});\nvar styles = FormStyles;\n\nvar HomeScreen = function HomeScreen(navData) {\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      inProgress = _useState2[0],\n      setInProgress = _useState2[1];\n\n  useEffect(function () {\n    setInProgress(false);\n  }, [inProgress]);\n  var auth = useSelector(function (state) {\n    return state.auth.authorized;\n  });\n\n  if (auth) {\n    return React.createElement(View, {\n      style: styles.container\n    }, React.createElement(Text, {\n      style: styles.noticeText\n    }, \"You are already logged in.\"), React.createElement(Text, {\n      style: styles.noticeText\n    }, \"Do you want to log out?\"), React.createElement(Button, {\n      onPress: function onPress() {\n        return navData.navigation.navigate(\"Logout\");\n      },\n      title: \"Logout\",\n      style: styles.noticeButton\n    }));\n  }\n\n  return React.createElement(KeyboardAvoidingView, {\n    behavior: Platform.OS === \"ios\" ? \"padding\" : \"height\",\n    style: {\n      flex: 1\n    }\n  }, React.createElement(ScrollView, null, React.createElement(Formik, {\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    validationSchema: formSchema,\n    onSubmit: function onSubmit(values) {\n      console.log(values);\n      setInProgress(true);\n      dispatch(authAction.loginUser(values)).then(function _callee(result) {\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(result);\n\n                if (!result.success) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.prev = 2;\n                _context.next = 5;\n                return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"token\", result.token));\n\n              case 5:\n                navData.navigation.navigate(\"Servewerx\");\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n                console.log(_context.t0);\n\n              case 11:\n                _context.next = 14;\n                break;\n\n              case 13:\n                Alert.alert(result.message);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, [[2, 8]], Promise);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, function (props) {\n    return React.createElement(View, {\n      style: styles.container\n    }, React.createElement(View, {\n      style: styles.logo\n    }, React.createElement(Image, {\n      source: require(\"../assets/servewerx_logo.png\"),\n      style: styles.image\n    }), React.createElement(Text, null, \"Let 'em know\"), inProgress && React.createElement(ActivityIndicator, {\n      size: \"small\",\n      color: \"#0000ff\"\n    })), React.createElement(View, null, React.createElement(TextInput, {\n      style: styles.inputBox,\n      placeholder: \"Email\",\n      placeholderTextColor: \"#fff\",\n      keyboardType: \"email-address\",\n      onChangeText: props.handleChange(\"email\"),\n      value: props.values.email,\n      onBlur: props.handleBlur(\"email\")\n    }), React.createElement(Text, {\n      style: styles.error\n    }, props.touched.email && props.errors.email), React.createElement(TextInput, {\n      style: styles.inputBox,\n      placeholder: \"Password\",\n      placeholderTextColor: \"#fff\",\n      secureTextEntry: true,\n      onChangeText: props.handleChange(\"password\"),\n      value: props.values.password,\n      onBlur: props.handleBlur(\"password\")\n    }), React.createElement(Text, {\n      style: styles.error\n    }, props.touched.password && props.errors.password), React.createElement(TouchableOpacity, {\n      style: styles.button,\n      onPress: props.handleSubmit\n    }, React.createElement(Text, {\n      style: styles.buttonText\n    }, \"Login\")), React.createElement(View, {\n      style: styles.registerContainer\n    }, React.createElement(Text, {\n      style: styles.registerText\n    }, \"Don't Have an Account?\"), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return navData.navigation.navigate(\"Register\");\n      }\n    }, React.createElement(Text, {\n      style: styles.registerButton\n    }, \"Register\")))));\n  })));\n};\n\nexport default HomeScreen;","map":{"version":3,"sources":["/Users/fredrickforte/Documents/developer/github/servewerx/servewerx_rn/screens/HomeScreen.js"],"names":["AsyncStorage","Formik","React","useEffect","useState","useDispatch","useSelector","yup","authAction","FormStyles","formSchema","object","email","string","required","password","min","styles","HomeScreen","navData","dispatch","inProgress","setInProgress","auth","state","authorized","container","noticeText","navigation","navigate","noticeButton","Platform","OS","flex","values","console","log","loginUser","then","result","success","setItem","token","Alert","alert","message","catch","err","props","logo","require","image","inputBox","handleChange","handleBlur","error","touched","errors","button","handleSubmit","buttonText","registerContainer","registerText","registerButton"],"mappings":"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","sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\n//npm install formik yup\nimport { Formik } from \"formik\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  ActivityIndicator, Alert,\n  Button, Image,\n  KeyboardAvoidingView,\n  Platform,\n  ScrollView,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View\n} from \"react-native\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as yup from \"yup\";\nimport * as authAction from \"../redux/actions/authAction\";\nimport FormStyles from \"./FormStyles\";\nconst formSchema = yup.object({\n  email: yup.string().email().required(),\n  password: yup.string().required().min(6),\n});\nconst styles = FormStyles;\n\n\n/*\nSVG major pain in the ass for react-native: \nhttps://svgtopng.com/\n\n*/\n\n\n\n\nconst HomeScreen = (navData) => {\n  const dispatch = useDispatch();\n  const [inProgress,setInProgress] = useState(false) ;\n\n  useEffect( () => {\n    setInProgress(false)\n  },[inProgress])\n\n \n   \n\n  // Check if already logged in.\n  var auth = useSelector((state) => state.auth.authorized);\n  \n  if (auth) {\n    return (\n      <View style={styles.container}>\n        <Text style={styles.noticeText}>You are already logged in.</Text>\n        <Text style={styles.noticeText}>Do you want to log out?</Text>\n        <Button\n        onPress={() => navData.navigation.navigate(\"Logout\")}\n        title=\"Logout\"\n        style={styles.noticeButton}\n      />\n      </View>\n    );\n  }\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      style={{ flex: 1 }}\n    >\n      <ScrollView>\n        <Formik\n          initialValues={{\n            email: \"\",\n            password: \"\",\n          }}\n          validationSchema={formSchema}\n          onSubmit={(values) => {\n            console.log(values);\n            setInProgress(true)\n            dispatch(authAction.loginUser(values))\n              .then(async (result) => {\n                console.log(result);\n                if (result.success) {\n                  try {\n                    await AsyncStorage.setItem(\"token\", result.token);\n                    navData.navigation.navigate(\"Servewerx\");\n                  } catch (error) {\n                    console.log(error);\n                  }\n                } else {\n                  Alert.alert(result.message);\n                }\n              })\n              .catch((err) => console.log(err));\n          }}\n        >\n          {(props) => (\n            <View style={styles.container}>\n              <View style={styles.logo}>\n                <Image\n                  source={require(\"../assets/servewerx_logo.png\")}\n                  style={styles.image}\n                />\n                <Text>Let 'em know</Text>\n                { inProgress && \n                  <ActivityIndicator size=\"small\" color=\"#0000ff\" />\n                   \n                }\n                \n\n              </View>\n           \n              <View>\n                <TextInput\n                  style={styles.inputBox}\n                  placeholder=\"Email\"\n                  placeholderTextColor=\"#fff\"\n                  keyboardType=\"email-address\"\n                  onChangeText={props.handleChange(\"email\")}\n                  value={props.values.email}\n                  onBlur={props.handleBlur(\"email\")}\n                />\n                <Text style={styles.error}>\n                  {props.touched.email && props.errors.email}\n                </Text>\n                <TextInput\n                  style={styles.inputBox}\n                  placeholder=\"Password\"\n                  placeholderTextColor=\"#fff\"\n                  secureTextEntry={true}\n                  onChangeText={props.handleChange(\"password\")}\n                  value={props.values.password}\n                  onBlur={props.handleBlur(\"password\")}\n                  \n                />\n                <Text style={styles.error}>\n                  {props.touched.password && props.errors.password}\n                </Text>\n\n                <TouchableOpacity\n                  style={styles.button}\n                  onPress={props.handleSubmit}\n                >\n                  <Text style={styles.buttonText}>Login</Text>\n                </TouchableOpacity>\n\n              \n               \n\n                <View style={styles.registerContainer}>\n                  <Text style={styles.registerText}>\n                    Don't Have an Account?\n                  </Text>\n                   \n                  <TouchableOpacity\n                    onPress={() => navData.navigation.navigate(\"Register\")}\n                  >\n\n                    <Text style={styles.registerButton}>Register</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n            </View>\n          )}\n        </Formik>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n};\n\nexport default HomeScreen;\n "]},"metadata":{},"sourceType":"module"}